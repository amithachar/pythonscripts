import boto3

# âœ… Flat list of instance IDs
INSTANCE_IDS = ["i-01456e27d869d0a94"]

def restart_instances(instance_ids):
    ec2 = boto3.client("ec2", region_name="ap-south-1")  # change region if needed
    try:
        # Stop instances
        print(f"Stopping instances: {', '.join(instance_ids)}")
        ec2.stop_instances(InstanceIds=instance_ids)
        waiter = ec2.get_waiter("instance_stopped")
        waiter.wait(InstanceIds=instance_ids)
        print("Instances stopped.")

        # Start instances
        print(f"Starting instances: {', '.join(instance_ids)}")
        ec2.start_instances(InstanceIds=instance_ids)
        waiter = ec2.get_waiter("instance_running")
        waiter.wait(InstanceIds=instance_ids)
        print("Instances are back up and running.")
    except Exception as e:
        print(f"Error restarting instances {instance_ids}: {e}")

if __name__ == "__main__":
    restart_instances(INSTANCE_IDS)
